<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Upload Anime - AnimeStream</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <h1 class="logo">ğŸ¬ AnimeStream</h1>
      <div class="nav-right">
        <% if (user) { %>
          <a href="/dashboard" class="user-badge">ğŸ‘¤ <%= user.username %></a>
        <% } else { %>
          <a href="/login" class="btn-upload">Masuk</a>
        <% } %>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="upload-container">
      <h2>ğŸ“¤ Upload Anime Baru</h2>
      <form action="/upload" method="POST" enctype="multipart/form-data" id="uploadForm">
        <div class="form-group">
          <label for="title">ğŸ¬ Judul Anime</label>
          <input type="text" id="title" name="title" required placeholder="Contoh: Naruto Shippuden">
        </div>

        <div class="form-group">
          <label for="episode">ğŸ“º Episode</label>
          <input type="text" id="episode" name="episode" required placeholder="Contoh: Episode 1">
        </div>

        <div class="form-group">
          <label for="description">ğŸ“ Deskripsi</label>
          <textarea id="description" name="description" rows="4" required placeholder="Ceritakan tentang anime ini..."></textarea>
        </div>

        <div class="form-group">
          <label for="video">ğŸ¥ File Video (MP4, MKV, AVI, WebM - Max 500MB)</label>
          <input type="file" id="video" name="video" accept="video/*" required>
          <div id="fileInfo" class="file-info"></div>
        </div>

        <div class="progress-container" id="progressContainer" style="display: none;">
          <div class="progress-bar" id="progressBar"></div>
          <span id="progressText">0%</span>
        </div>

        <button type="submit" class="btn btn-primary btn-large">ğŸš€ Upload Sekarang</button>
      </form>
    </div>
  </div>

  <div class="bottom-nav">
    <a href="/">
      <span>ğŸ </span>
      <span>Beranda</span>
    </a>
    <a href="/upload" class="active">
      <span>â¬†ï¸</span>
      <span>Upload</span>
    </a>
  </div>

  <script>
    const fileInput = document.getElementById('video');
    const fileInfo = document.getElementById('fileInfo');
    const form = document.getElementById('uploadForm');
    const progressContainer = document.getElementById('progressContainer');

    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
        fileInfo.textContent = `File: ${file.name} (${sizeMB} MB)`;
      }
    });

    form.addEventListener('submit', (e) => {
      progressContainer.style.display = 'block';
      document.querySelector('.btn-large').disabled = true;
    });
  </script>
</body>
</html>
